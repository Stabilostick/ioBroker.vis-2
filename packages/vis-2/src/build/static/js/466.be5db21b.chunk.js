"use strict";(self.webpackChunkvis_2_gui=self.webpackChunkvis_2_gui||[]).push([[466],{47569:(t,e,i)=>{i.d(e,{M_:()=>v,V_:()=>u,WK:()=>l,sf:()=>p,vl:()=>d});var n=i(97108),o=i(72947);const s="fakeId",a=(0,n.VP)("project/update"),d=(0,n.VP)("view/update"),l=(0,n.VP)("widget/update"),r=(0,n.VP)("group/update"),c=(0,n.VP)("activeUser/update"),u=(0,n.VP)("attributes/recalculate"),g=(0,n.vy)({visProject:{},recalculateFields:!1,activeUser:""},(t=>{t.addCase(a,((t,e)=>{t.visProject=e.payload})).addCase(d,((t,e)=>{const{viewId:i,data:n}=e.payload;t.visProject[i]=n})).addCase(l,((t,e)=>{const{viewId:i,widgetId:n,data:o}=e.payload;n!==s&&(i in t.visProject?t.visProject[i].widgets[n]=o:console.error('Cannot update widget "'.concat(n,'". The view "').concat(i,'" does not exist in the project.')))})).addCase(r,((t,e)=>{const{viewId:i,widgetId:n,data:o}=e.payload;n!==s&&(i in t.visProject?t.visProject[i].widgets[n]=o:console.error('Cannot update group widget "'.concat(n,'". The view "').concat(i,'" does not exist in the project.')))})).addCase(c,((t,e)=>{t.activeUser=e.payload})).addCase(u,((t,e)=>{t.recalculateFields=e.payload}))})),p=(0,o.Mz)([t=>t.visProject,(t,e)=>e],((t,e)=>t[e])),v=((0,o.Mz)([p,(t,e,i)=>i],((t,e)=>t.widgets[e])),(0,n.U1)({reducer:g}))},30419:(t,e,i)=>{i.d(e,{EI:()=>n,Go:()=>a,Ny:()=>s,Rg:()=>o,lG:()=>l});i(47569);const n="nothing_selected";function o(t){t.overflowX||t.overflowY?t.overflow&&delete t.overflow:t.overflow="visible"}function s(t){return window.isFinite(t)}function a(t){return JSON.parse(JSON.stringify(t))}const d={read:!0,write:!0};function l(t){var e,i,n,o;const{project:s,user:a,editMode:l,view:r,wid:c}=t,u=null!==(e=null===(i=s[r])||void 0===i||null===(n=i.widgets[c])||void 0===n||null===(o=n.permissions)||void 0===o?void 0:o[a])&&void 0!==e?e:d;return!(!l||!u.write)||!l&&u.read}},18488:(t,e,i)=>{i.d(e,{Um:()=>a});var n=i(73258);const o=(t,e,n,o)=>()=>((t,e,n)=>(window["_promise_".concat(t)]=window["_promise_".concat(t)]||new Promise(((o,s)=>{const a=async()=>{if(!window[t])return n&&(n.startsWith("http://")||n.startsWith("https://"))?console.error('Cannot load remote from url "'.concat(n,'"')):s(new Error("Cannot load ".concat(t," from ").concat(n))),void o(null);if(!window[t].__initialized){if(!window[t].init)return void s(new Error("Remote init function not found for ".concat(t," from ").concat(n)));try{await window[t].init(i.S[e])}catch(a){return console.error('Cannot init remote "'.concat(t,'" with "').concat(e,'"')),console.error(a),s(new Error('Cannot init remote "'.concat(t,'" with "').concat(e,'"'))),void s(a)}window[t].__initialized=!0}o(null)};if(document.querySelector('[data-webpack="'.concat(t,'"]')))console.warn("SOMEONE IS LOADING THE REMOTE ".concat(t)),o(null);else if(n){const e=document,i=e.createElement("script");i.type="text/javascript",i.setAttribute("data-webpack","".concat(t)),i.async=!0,i.onerror=()=>{n.includes("iobroker.net")?o(null):s(new Error("Cannot load ".concat(t," from ").concat(n)))},i.onload=a,i.src=n,e.getElementsByTagName("head")[0].appendChild(i)}else s(new Error("Cannot Find Remote ".concat(t," to inject")))})),window["_promise_".concat(t)]))(t,e,o).then((()=>window[t]&&window[t].get(n))).then((t=>t&&t()));function s(t){const e=[];for(let i=0;i<t.visWidgetsCollection.components.length;i++)((i,n)=>{t.countRef.max++;const s=o(n.name,"default","./".concat(n.components[i]),n.url)().then((e=>{t.countRef.count++,e.default?(e.default.adapter=t.dynamicWidgetInstance._id.substring(15).replace(/\.\d*$/,""),e.default.version=t.dynamicWidgetInstance.common.version,e.default.url=n.url,t.i18nPrefix&&(e.default.i18nPrefix=t.i18nPrefix),t.result.push(e.default)):console.error("Cannot load widget ".concat(t.dynamicWidgetInstance._id,". No default found")),window.__widgetsLoadIndicator&&window.__widgetsLoadIndicator(t.countRef.count,t.countRef.max)})).catch((e=>{console.error("Cannot load widget ".concat(t.dynamicWidgetInstance._id,": ").concat(e.toString())),console.error("Cannot load widget ".concat(t.dynamicWidgetInstance._id,": ").concat(JSON.stringify(e)))}));e.push(s)})(i,t.visWidgetsCollection);return Promise.all(e)}function a(t,e){return t.getObjectViewSystem("instance","system.adapter.","system.adapter.\u9999").then((t=>{const i=[],a={count:0,max:0},d=Object.values(t).filter((t=>{if(!t.common.visWidgets)return!1;return!(t.common.visWidgets.ignoreInVersions||[]).includes(2)&&(!e||e.includes("object"===typeof(i=t.common.name)?i[n.I18n.getLanguage()]||i.en||"":(i||"").toString()));var i})),l=[];for(let e=0;e<d.length;e++){const t=d[e];for(const e in t.common.visWidgets)if("i18n"===e){const e=Object.keys(t.common.visWidgets).find((t=>"i18n"!==t));console.warn("common.visWidgets.i18n is deprecated. Use common.visWidgets.".concat(e,".i18n instead."))}else{var r;const d=t.common.visWidgets[e];null!==(r=d.url)&&void 0!==r&&r.startsWith("http")||(d.url="./widgets/".concat(d.url)),d.components&&((t,e)=>{try{let r,c="";if(t.url&&!0===t.i18n){const e=t.url.lastIndexOf("/");let i;i=-1!==e?t.url.substring(0,e):t.url;const o=n.I18n.getLanguage();r=fetch("".concat(i,"/i18n/").concat(o,".json")).then((t=>t.json())).then((t=>{a.count++,n.I18n.extendTranslations(t,o),window.__widgetsLoadIndicator&&window.__widgetsLoadIndicator(a.count,l.length)})).catch((t=>"en"!==o?fetch("".concat(i,"/i18n/en.json")).then((t=>t.json())).then((t=>{a.count++,n.I18n.extendTranslations(t,o),window.__widgetsLoadIndicator&&window.__widgetsLoadIndicator(a.count,l.length)})).catch((t=>console.log('Cannot load i18n "'.concat(i,"/i18n/").concat(o,'.json": ').concat(t)))):(console.log('Cannot load i18n "'.concat(i,"/i18n/").concat(o,'.json": ').concat(t)),null))),l.push(r)}else if(t.url&&"component"===t.i18n)r=o(t.name,"default","./translations",t.url)().then((t=>{a.count++,!0===t.default.prefix&&(t.default.prefix="".concat(e.common.name,"_")),c=t.default.prefix,n.I18n.extendTranslations(t.default),window.__widgetsLoadIndicator&&window.__widgetsLoadIndicator(a.count,l.length)})).catch((e=>console.log('Cannot load i18n "'.concat(t.name,'": ').concat(e))));else if(t.i18n&&"object"===typeof t.i18n)try{n.I18n.extendTranslations(t.i18n)}catch(d){console.error("Cannot import i18n: ".concat(d))}t.components?r?l.push(r.then((()=>s({visWidgetsCollection:t,countRef:a,dynamicWidgetInstance:e,i18nPrefix:c,result:i})))):l.push(s({visWidgetsCollection:t,countRef:a,dynamicWidgetInstance:e,i18nPrefix:c,result:i})):r&&l.push(r)}catch(r){console.error(r)}})(d,t)}}return Promise.all(l).then((()=>i))})).catch((t=>console.error("Cannot read instances",t)))}},18644:(t,e,i)=>{i.d(e,{_X:()=>l,bx:()=>s,iQ:()=>r,mo:()=>u,vy:()=>c});var n=i(30419),o=i(47569);function s(t,e){let i=t,n=!1,o=t.match(/(groupAttr\d+)+?/g);return o&&(n=!0,o.forEach((t=>{const n=e[t];i=null===n||void 0===n?i.replace(/groupAttr(\d+)/,""):i.replace(/groupAttr(\d+)/,e[t])}))),o=t.match(/%([-_a-zA-Z\d]+)+?%/g),o&&(n=!0,o.forEach((t=>{const n=t.substring(1,t.length-1),o=e[n];i=null===o||void 0===o?i.replace(t,""):i.replace(t,o)}))),{doesMatch:n,newString:i}}function a(t,e,i){var n;const o=t[e].widgets,s=null===(n=o[i])||void 0===n?void 0:n.groupid;if(s&&o[s])return t[e].widgets[i].groupid;return Object.keys(o).find((t=>{var e,n;return null===(e=o[t].data)||void 0===e||null===(n=e.members)||void 0===n?void 0:n.includes(i)}))}function d(t){const e=t.match(/{(.+?)}/g);let i=null;if(e){e.length>50&&console.warn("Too many bindings in one widget: ".concat(e.length,"[max = 50]"));for(let s=0;s<e.length&&s<50;s++){const a=e[s].substring(1,e[s].length-1);if("{"===a[0])continue;if(a&&'"'===a[0])continue;const d=a.split(";");i=i||[];let l=d[0].trim(),r=l,c=r.substring(r.length-4).trim(),u=r.substring(r.length-3).trim();r&&".val"!==c&&".ts"!==u&&".lc"!==u&&".ack"!==c&&(r+=".val");const g=".ts"===u||".lc"===u;c=l.substring(l.length-4),u=l.substring(l.length-3),".val"===c||".ack"===c?l=l.substring(0,l.length-4):".lc"!==u&&".ts"!==u||(l=l.substring(0,l.length-3));let p=null;if(r.match(/^[\d\w_]+:\s?[-._/ :!#$%&()+=@^{}|~\p{Ll}\p{Lu}\p{Nd}]+$/u)||!r.length&&d.length>0){const t=r.split(":",2),e=l.split(":",2);r=t[1].trim(),l=e[1].trim(),p=[],p.push({op:"eval",arg:[{name:t[0],visOid:r,systemOid:l}]});for(let i=1;i<d.length;i++){const t=d[i].trim();if(t.match(/^[\d\w_]+:\s?[-.\d\w_#]+$/)){var o;const e=t.split(":",2);let i=e[1].trim(),n=i;c=i.substring(i.length-4),u=i.substring(i.length-3),".val"!==c&&".ts"!==u&&".lc"!==u&&".ack"!==c&&(i+=".val"),c=n.substring(n.length-4),".val"===c||".ack"===c?n=n.substring(0,n.length-4):(u=n.substring(n.length-3),".lc"!==u&&".ts"!==u||(n=n.substring(0,n.length-3))),null===(o=p[0].arg)||void 0===o||o.push({name:e[0].trim(),visOid:i,systemOid:n})}else if(d[i]=d[i].replace(/::/g,":"),p[0].formula){const t=(0,n.Go)(p[0]);t.formula=d[i],p.push(t)}else p[0].formula=d[i]}}else for(let e=1;e<d.length;e++){const i=d[e].match(/([\w\s/+*-]+)(\(.+\))?/);if(i&&i[1]){const e=i[1].trim();if("*"===e||"+"===e||"-"===e||"/"===e||"%"===e||"min"===e||"max"===e)if(void 0===i[2])console.log("Invalid format of format string: ".concat(t));else{let n=(i[2]||"").trim().replace(",",".");n=n.substring(1,n.length-1).trim();const o=parseFloat(n);"NaN"===o.toString()?console.log("Invalid format of format string: ".concat(t)):(p=p||[],p.push({op:e,arg:o}))}else if("date"===e||"momentDate"===e){p=p||[];let t=(i[2]||"").trim();t=t.substring(1,t.length-1),p.push({op:e,arg:t})}else if("array"===e){p=p||[];let t=(i[2]||"").trim();t=t.substring(1,t.length-1),p.push({op:e,arg:t.split(",")})}else if("value"===e){p=p||[];let t=void 0===i[2]?"(2)":i[2]||"";t=t.trim(),t=t.substring(1,t.length-1),p.push({op:e,arg:t})}else if("pow"===e||"round"===e||"random"===e)if(void 0===i[2])p=p||[],p.push({op:e});else{let n=(i[2]||"").trim().replace(",",".");n=n.substring(1,n.length-1);const o=parseFloat(n.trim());"NaN"===o.toString()?console.log("Invalid format of format string: ".concat(t)):(p=p||[],p.push({op:e,arg:o}))}else if("json"===e){p=p||[];let t=(i[2]||"").trim();t=t.substring(1,t.length-1),p.push({op:e,arg:t})}else p=p||[],p.push({op:e})}else console.log("Invalid format ".concat(t))}i.push({visOid:r,systemOid:l,token:e[s],operations:p||void 0,format:t,isSeconds:g})}}return i}function l(t,e,i,l){const r=(0,n.Go)(t[e].widgets[i]);r.groupped&&(r.grouped=!0,delete r.groupped),"hqWidgets"===r.widgetSet&&(r.widgetSet="hqwidgets"),"RGraph"===r.widgetSet&&(r.widgetSet="rgraph"),"timeAndWeather"===r.widgetSet&&(r.widgetSet="timeandweather"),"tplShowValue"===r.tpl&&(r.tpl="tplHtml",r.data["visibility-oid"]=r.data.oid,r.data["visibility-val"]=r.data.value,delete r.data.oid,delete r.data.value),"tplHideTrue"===r.tpl&&(r.tpl="tplHtml",r.data["visibility-cond"]="!=",r.data["visibility-oid"]=r.data.oid,r.data["visibility-val"]=!0,delete r.data.oid),"tplHide"===r.tpl&&(r.tpl="tplHtml",r.data["visibility-cond"]="!=",r.data["visibility-oid"]=r.data.oid,r.data["visibility-val"]=!1,delete r.data.oid),"tplHmWindow"===r.tpl&&(r.tpl="tplValueBool",r.data.html_false=r.data.html_closed,r.data.html_true=r.data.html_open,delete r.data.html_closed,delete r.data.html_open),"tplHmWindowRotary"===r.tpl&&(r.tpl="tplValueListHtml8",r.data.count=2,r.data.value0=r.data.html_closed,r.data.value1=r.data.html_open,r.data.value2=r.data.html_tilt,delete r.data.html_closed,delete r.data.html_open,delete r.data.html_tilt),"tplBulbOnOff"===r.tpl&&(r.tpl="tplBulbOnOffCtrl",r.data.readOnly=!0),"tplValueFloatBarVertical"===r.tpl&&(r.tpl="tplValueFloatBar",r.data.orientation="vertical");let{data:c}=r;const{style:u}=r;if(r.grouped){if(r.groupid||o.M_.dispatch((0,o.WK)({viewId:e,widgetId:i,data:{...r,groupid:a(t,e,i)}})),r.groupid&&!o.M_.getState().visProject[e].widgets[r.groupid]&&(o.M_.dispatch((0,o.WK)({viewId:e,widgetId:i,data:{...r,groupid:a(t,e,i)}})),!r.groupid)){let s=1,a="g".concat(s.toString().padStart(5,"0"));for(;t[e].widgets[a];)s++,a="g".concat(s.toString().padStart(5,"0"));const d=(0,n.Go)(t[e]);d.widgets[a]={tpl:"_tplGroup",data:{members:[i]},style:{top:"100px",left:"100px",width:"200px",height:"200px"},widgetSet:null},o.M_.dispatch((0,o.vl)({viewId:e,data:d}))}if(r.groupid){var g;const o=null===(g=t[e].widgets[r.groupid])||void 0===g?void 0:g.data;if(o){let t;Object.keys(c).forEach((e=>{if("string"===typeof c[e]){const i=s(c[e],o);i.doesMatch&&(t=t||(0,n.Go)(c),t[e]=i.newString||"")}})),t&&(c=t)}else console.error('Invalid group id "'.concat(r.groupid,'" in widget "').concat(i,'"'))}}Object.keys(c||{}).forEach((n=>{if(n&&"string"===typeof c[n]){let u;const g=d(c[n]);if(g)g.forEach((t=>{const o=t.systemOid;o&&(!l.IDs.includes(o)&&l.IDs.push(o),l.byViews&&!l.byViews[e].includes(o)&&l.byViews[e].push(o),l.bindings[o]=l.bindings[o]||[],t.type="data",t.attr=n,t.view=e,t.widget=i,l.bindings[o].push(t));const s=t.operations&&t.operations[0];if(s&&Array.isArray(s.arg))for(let i=0;i<s.arg.length;i++){const n=s.arg[i].systemOid;n&&(!l.IDs.includes(n)&&l.IDs.push(n),l.byViews&&!l.byViews[e].includes(n)&&l.byViews[e].push(n),l.bindings[n]=l.bindings[n]||[],l.bindings[n].includes(t)||l.bindings[n].push(t))}}));else if("oidTrueValue"!==n&&"oidFalseValue"!==n&&c[n]&&"nothing_selected"!==c[n]){let d=!!n.match(/oid\d{0,2}$/);if(n.startsWith("oid"))d=!0;else if(n.startsWith("signals-oid-"))d=!0;else if(l.widgetAttrInfo){var o;const t=n.replace(/\d{0,2}$/,"");"id"===(null===(o=l.widgetAttrInfo[t])||void 0===o?void 0:o.type)&&!0!==l.widgetAttrInfo[t].noSubscribe&&(d=!0)}if(d){if(c[n].startsWith('"')||(l.IDs.includes(c[n])||l.IDs.push(c[n]),l.byViews&&!l.byViews[e].includes(c[n])&&l.byViews[e].push(c[n])),"visibility-oid"===n){let n=c["visibility-oid"];if(r.grouped){const o=a(t,e,i);if(o)if(t[e].widgets[o]){const i=s(n,t[e].widgets[o].data);i.doesMatch&&(n=i.newString)}else console.warn("Invalid group: ".concat(o," in ").concat(e," / ").concat(i))}l.visibility[n]=l.visibility[n]||[],l.visibility[n].push({view:e,widget:i})}else if(n.startsWith("signals-oid-")){let o=c[n];if(r.grouped){const n=a(t,e,i);if(n){const i=s(o,t[e].widgets[n].data);i.doesMatch&&(o=i.newString)}}l.signals[o]=l.signals[o]||[],l.signals[o].push({view:e,widget:i,index:parseInt(n.substring(12),10)})}else if("lc-oid"===n){let o=c[n];if(r.grouped){const n=a(t,e,i);if(n){const i=s(o,t[e].widgets[n].data);i.doesMatch&&(o=i.newString)}}l.lastChanges[o]=l.lastChanges[o]||[],l.lastChanges[o].push({view:e,widget:i})}}else if("id"===c[n]&&(u=n.match(/^attrType(\d+)$/),u)){const t="groupAttr".concat(u[1]);c[t]&&(l.IDs.includes(c[t])||l.IDs.push(c[t]),l.byViews&&!l.byViews[e].includes(c[t])&&l.byViews[e].push(c[t]))}}}})),u&&Object.keys(u).forEach((t=>{const n=u[t];if(t&&n&&"string"===typeof n){const o=d(n);o&&o.forEach((n=>{const o=n.systemOid;o&&(!l.IDs.includes(o)&&l.IDs.push(o),l.byViews&&l.byViews[e].includes(o)&&l.byViews[e].push(o),l.bindings[o]=l.bindings[o]||[],n.type="style",n.attr=t,n.view=e,n.widget=i,l.bindings[o].push(n));const s=n.operations&&n.operations[0];if(s&&Array.isArray(s.arg))for(let t=0;t<s.arg.length;t++){const i=s.arg[t].systemOid;i&&(!l.IDs.includes(i)&&l.IDs.push(i),l.byViews&&!l.byViews[e].includes(i)&&l.byViews[e].push(i),l.bindings[i]=l.bindings[i]||[],l.bindings[i].includes||l.bindings[i].push(n))}}))}})),o.M_.dispatch((0,o.WK)({viewId:e,widgetId:i,data:r}))}function r(t,e){if(t){const i=t.split(" ").map((t=>t.trim())).filter((t=>t));return e&&!i.includes(e)&&i.push(e),i.join(" ")}return e||""}function c(t,e){if(t){const i=t.split(" ").map((t=>t.trim())).filter((t=>t)),n=i.indexOf(e);return-1!==n&&i.splice(n,1),i.join(" ")}return""}function u(t){const e={value:0,dimension:"px"};if(!t)return e;const i=t.toString().match(/^([0-9-.]+)([a-z%]*)$/);return i?(e.value=parseInt(i[1]),e.dimension=i[2]||"px",e):e}},86219:(t,e,i)=>{i.d(e,{Ay:()=>l,Y7:()=>d});var n=i(18488),o=i(75777);const s={basic:"#f1f1f1",bars:"#f6594e",dwd:"#cb8928",echarts:"#98B1C0",eventlist:"#c52699",hqwidgets:"#005067",jqplot:"#00e753",jqui:"#008be0",metro:"#9f8ad8",swipe:"#858585",tabs:"#00d5a3","spotify-premium":"#00ae03"};class a{static getUsedWidgetSets(t){let e=!1;const i=[],n=Object.keys(t);for(let o=0;o<n.length;o++){if("___settings"===n[o])continue;const s=t[n[o]].widgets,a=Object.keys(s);for(let t=0;t<a.length;t++){const n=s[a[t]].widgetSet;if(!n||s[a[t]].set||s[a[t]].wSet){e=!0;break}i.includes(n)||i.push(n)}if(e){console.warn("Found widgets without widget set. Will load all widget sets");break}}return!e&&i.sort(),!e&&i}static setUsedWidgetSets(t){let e;const i=window.visWidgetTypes,n=Object.keys(t);for(let o=0;o<n.length;o++){if("___settings"===n[o])continue;const s=t[n[o]].widgets,a=Object.keys(s);for(let d=0;d<a.length;d++){if(s[a[d]].set&&(e=e||JSON.parse(JSON.stringify(t)),delete e[n[o]].widgets[a[d]].set),s[a[d]].wSet&&(e=e||JSON.parse(JSON.stringify(t)),delete e[n[o]].widgets[a[d]].wSet),s[a[d]].widgetSet)continue;const l=s[a[d]].tpl;if("_tplGroup"===l)e=e||JSON.parse(JSON.stringify(t)),e[n[o]].widgets[a[d]].widgetSet="basic";else{const s=i.find((t=>t.name===l));s&&(e=e||JSON.parse(JSON.stringify(t)),e[n[o]].widgets[a[d]].widgetSet=s.set)}}}return e}static collectRxInformation(t,e,i){if(!a.rxWidgets){a.rxWidgets={};let s=null;return e&&(s=a.getUsedWidgetSets(e)),new Promise((l=>{setTimeout((()=>(0,n.Um)(t,!(i||!s)&&s).then((t=>{if([...o.A,...t||[]].forEach((t=>{if(null!==t&&void 0!==t&&t.getWidgetInfo){const e=t.getWidgetInfo();e.visSet||console.error('No visSet in info for "'.concat(t.constructor.name,'"')),e.id?a.rxWidgets&&(a.rxWidgets[e.id]=t):console.error('No id in info for "'.concat(t.constructor.name,'"'))}else console.error("Invalid widget without getWidgetInfo: ".concat(t.constructor.name))})),i?d():s?d(s):d(),!1===s&&i){const t=a.setUsedWidgetSets(e);t&&(console.warn("Found widgets without widget set. Project updated"),i(t))}l(a.rxWidgets)}))),0)}))}return Promise.resolve(a.rxWidgets)}}a.rxWidgets=null,a.allWidgetsList=null;const d=t=>{if(!window.visWidgetTypes){if(window.visSets={},a.allWidgetsList=[],!a.rxWidgets)return[];window.visWidgetTypes=Array.from(document.querySelectorAll('script[type="text/ejs"]')).map((e=>{var i,n,o,d,l,r,c,u,g,p,v,f,w;const h=e.getAttribute("id");if(!h||!a.rxWidgets)return null;let m;var b;if(null!==(i=a.rxWidgets[h])&&void 0!==i&&i.getWidgetInfo&&(m=a.rxWidgets[h].getWidgetInfo(),null!==(b=m)&&void 0!==b&&b.visAttrs&&"string"!==typeof m.visAttrs))return null;const y=e.getAttribute("data-vis-set")||"basic";if(t&&!t.includes(y))return console.log("Ignored ".concat(y,"/").concat(h," because not used in project")),null;const W=e.getAttribute("data-vis-color");window.visSets[y]=window.visSets[y]||{},W?window.visSets[y].color=W:!window.visSets[y].color&&s[y]&&(window.visSets[y].color=s[y]);const I={name:h,title:(null===(n=m)||void 0===n?void 0:n.visName)||e.getAttribute("data-vis-name")||void 0,label:null!==(o=m)&&void 0!==o&&o.visWidgetLabel||""===(null===(d=m)||void 0===d?void 0:d.visWidgetLabel)?m.visWidgetLabel:void 0,preview:(null===(l=m)||void 0===l?void 0:l.visPrev)||e.getAttribute("data-vis-prev")||void 0,help:e.getAttribute("data-vis-help")||void 0,set:(null===(r=m)||void 0===r?void 0:r.visSet)||y,imageHTML:e.getAttribute("data-vis-prev")||"",init:e.getAttribute("data-vis-init")||void 0,color:(null===(c=m)||void 0===c?void 0:c.visWidgetColor)||void 0,params:(null===(u=m)||void 0===u?void 0:u.visAttrs)||Object.values(e.attributes).filter((t=>t.name.startsWith("data-vis-attrs"))).map((t=>t.value)).join(""),setLabel:(null===(g=m)||void 0===g?void 0:g.visSetLabel)||void 0,setColor:(null===(p=m)||void 0===p?void 0:p.visSetColor)||void 0,order:void 0===(null===(v=m)||void 0===v?void 0:v.visOrder)||null===(null===(f=m)||void 0===f?void 0:f.visOrder)?1e3:"string"===typeof m.visOrder?parseInt(m.visOrder,10):m.visOrder,hidden:"true"===e.getAttribute("data-vis-no-palette")};return null===(w=a.allWidgetsList)||void 0===w||w.push(I.name),I})).filter((t=>t));Object.values(a.rxWidgets).forEach((t=>{var e;const i=t.getWidgetInfo(),n=t.i18nPrefix||"",o={name:i.id,preview:i.visPrev,title:i.visName,params:i.visAttrs,set:i.visSet,style:i.visDefaultStyle,label:i.visWidgetLabel?n+i.visWidgetLabel:""===i.visWidgetLabel?"":void 0,setLabel:i.visSetLabel?n+i.visSetLabel:void 0,setColor:i.visSetColor,setIcon:i.visSetIcon,color:i.visWidgetColor,resizable:i.visResizable,resizeLocked:i.visResizeLocked,draggable:i.visDraggable,adapter:t.adapter||void 0,version:t.version||void 0,hidden:t.visHidden,order:void 0===i.visOrder?1e3:i.visOrder,customPalette:i.customPalette,rx:!0,developerMode:null===(e=t.url)||void 0===e?void 0:e.startsWith("http://"),i18nPrefix:n};a.allWidgetsList&&!a.allWidgetsList.includes(o.name)&&a.allWidgetsList.push(o.name);const s=window.visWidgetTypes.findIndex((t=>t.name===o.name));s>-1?window.visWidgetTypes[s]=o:window.visWidgetTypes.push(o),n&&"object"===typeof i.visAttrs&&i.visAttrs.forEach((t=>{t.label&&!t.label.startsWith(n)&&(t.label=n+t.label),t.fields&&t.fields.forEach((t=>{const e=t;e.label&&!e.label.startsWith(n)&&(e.label=n+e.label),e.tooltip&&!e.tooltip.startsWith(n)&&(e.tooltip=n+e.tooltip),e.options&&!e.noTranslation&&Array.isArray(e.options)&&e.options.forEach((t=>{"object"===typeof t&&t.label&&!t.label.startsWith(n)&&(t.label=n+t.label)}))}))}))}))}return window.visWidgetTypes},l=a}}]);
//# sourceMappingURL=466.be5db21b.chunk.js.map